import Link from "next/link"
import React from "react"
import styled from "styled-components"
import Grid from "../organisms/blog-grid"
import Pagination from "../organisms/pagination"

export default function Archive({ currPage, urlBasis, categories, posts }) {
  // TODO: get current page from url & add urlBasis
  return (
    <Wrapper>
      <div className="container">
        <h2>Kategorie</h2>
        <div className="flex">
          {categories.map(({ name, slug, count }) => (
            <React.Fragment key={slug + count}>
              <Link key={slug} href={`/blog/${slug}`}>{name} ({count ? count : 0})</Link>
              <span className="line" />
            </React.Fragment>
          ))}
        </div>
        <Grid currentPage={Number(currPage)} posts={posts.nodes} />
        <Pagination currentPage={Number(currPage)} itemCount={posts.pageInfo.offsetPagination.total} urlBasis={urlBasis} />
        <svg className="runes" width="63" height="51" viewBox="0 0 63 51" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.40241 11.1973C6.82795 9.69433 5.82787 8.83125 4.71766 8.00388C2.7919 6.56938 1.41679 4.61108 0 2.73313C0.654817 1.6885 0.729228 1.68255 1.62514 1.96528C2.80976 2.3373 3.82473 2.89086 4.58669 3.93549C4.92303 4.39382 5.54511 4.63786 6.02431 4.99797C7.12857 5.82534 8.2239 6.66462 9.37579 7.54258C11.1289 5.3819 12.501 3.10217 13.7839 0.733158C14.9804 0.450424 15.8972 1.12601 16.8615 1.65576C17.9926 2.28075 18.0997 3.42359 18.3111 4.62C18.0551 4.89976 17.7902 5.29559 17.433 5.56344C16.0638 6.59021 15.0816 7.90865 14.4357 9.47112C14.0696 10.355 13.7631 11.2717 13.5339 12.1973C13.4624 12.4919 13.6619 12.9115 13.8464 13.2032C14.3941 14.0603 15.04 14.8431 15.284 15.8817C15.3703 16.2567 15.7275 16.5782 15.9924 16.8996C17.5283 18.7686 19.0968 20.6108 20.6029 22.5066C21.4036 23.5126 22.0286 25.1435 22.1358 25.953C21.2548 27.2209 20.4541 28.3488 19.6802 29.4946C18.4093 31.3756 17.1741 33.2803 15.8942 35.1553C14.9477 36.5392 14.9477 36.7505 15.9061 38.1165C16.7544 39.3278 17.4806 40.6254 18.3736 41.801C19.1593 42.8337 20.085 43.7652 20.9809 44.7146C22.4811 46.3009 23.4335 48.1789 23.9961 50.2681C24.0169 50.3425 23.9514 50.4437 23.8859 50.664C22.6745 50.7116 21.6596 50.0866 20.841 49.3366C18.573 47.2592 16.4002 45.0777 14.2095 42.9141C13.8137 42.5242 13.5309 42.0242 13.1797 41.5867C12.8314 41.1522 12.4356 41.0212 12.007 41.4855C11.626 41.8962 11.1825 42.2712 10.8967 42.7385C10.1943 43.8843 9.59307 45.0896 8.90253 46.2414C8.59596 46.7533 8.22986 47.2592 7.79232 47.661C7.15536 48.2444 6.29517 47.9944 6.22374 47.1461C6.12849 45.9974 5.54213 45.1373 4.94387 44.2533C4.46168 43.5391 4.32477 42.8159 4.66706 42.0063C5.34866 40.3903 5.81894 38.6998 6.9857 37.2892C7.61076 36.5302 7.87864 35.4767 8.35487 34.4559C8.02151 33.9053 7.6554 33.2624 7.24763 32.6434C6.68508 31.7892 6.06301 30.9738 5.52427 30.1077C5.00042 29.2655 4.50633 28.4262 3.49732 28.075C3.37231 28.0304 3.24134 27.9381 3.16991 27.828C2.46747 26.7893 1.71741 25.7744 1.10426 24.6822C0.723275 24.0066 0.505995 23.2745 1.25308 22.5334C1.64002 22.1495 1.77991 21.462 1.91087 20.8846C2.27698 19.2597 3.29492 17.971 4.08963 16.5752C5.14329 14.73 6.31601 12.9532 7.40538 11.1943L7.40241 11.1973ZM10.7807 30.575C12.004 28.2476 13.2809 25.9411 14.4268 23.5721C14.9001 22.5929 15.2513 21.4918 14.0726 20.5781C13.6589 20.2567 13.4714 19.6525 13.138 19.2091C12.6261 18.5246 12.3373 17.6377 11.5367 17.2418C9.65855 20.0245 7.82804 22.7358 5.98562 25.4649C7.6435 27.2328 9.19422 28.8845 10.7807 30.575Z" fill="#9AACB8" fillOpacity="0.3" />
          <path d="M60.7209 49.6665C59.6913 48.1747 58.6986 46.9912 58.001 45.6504C57.3003 44.3066 57.4232 42.7409 57.4601 41.2491C57.5031 39.4676 57.5554 37.6861 57.6783 35.9108C57.7582 34.7303 57.4754 33.7656 56.6241 32.9026C53.8581 30.0948 51.132 27.2438 48.4213 24.439C47.6223 24.5684 47.1551 24.9814 46.7402 25.5609C45.9903 26.615 45.1267 27.589 44.3891 28.6492C43.8728 29.3889 43.4026 30.1841 43.0614 31.0163C42.3945 32.6406 41.7675 34.2649 41.8044 36.1019C41.8597 38.9005 41.6845 41.7022 41.7552 44.4977C41.8044 46.4302 41.3311 48.1223 40.1755 49.6418C37.9504 48.3874 36.6565 46.3439 36.6289 43.9029C36.6012 41.4988 36.6781 39.0916 36.6412 36.6875C36.5951 33.7101 36.6811 30.7081 36.34 27.7616C35.9712 24.5654 35.8636 21.363 35.6669 18.1606C35.5962 17.0171 35.6915 15.8582 35.7438 14.7086C35.8421 12.4956 36.0572 10.2857 36.0449 8.0727C36.0357 6.56552 36.0572 4.97821 35 3.65904C35.7161 3.07959 36.426 2.49706 37.1421 1.9207C37.2528 1.83132 37.388 1.76043 37.5232 1.72344C38.7894 1.36899 41.0607 2.73439 41.4356 4.01965C41.5462 4.39876 41.7522 4.81485 42.0441 5.06451C42.7141 5.64395 43.2888 6.25422 43.5409 7.12956C43.6054 7.35764 43.7283 7.57955 43.8636 7.77681C45.2312 9.75248 46.6081 11.722 47.988 13.6884C48.0925 13.8363 48.2585 13.9442 48.5566 14.2216C49.1313 13.2631 49.7705 12.4247 50.167 11.4847C50.7848 10.0268 51.7098 8.84016 52.807 7.73366C53.5661 6.9662 54.2269 6.09395 55.069 5.10457C56.0187 5.1354 56.7317 4.30629 57.2173 3.3539C57.4293 2.94089 57.6629 2.60802 57.9979 2.7159C59.1105 3.07651 60.3736 2.94706 61.3417 3.81623C61.8488 4.27239 62.1685 4.7193 62.0793 5.42512C61.855 7.18812 61.938 8.93262 62.1992 10.7018C62.3559 11.7682 62.0209 12.9024 62.1347 13.9812C62.4358 16.8199 61.9902 19.6555 62.2053 22.488C62.3283 24.1154 62.4512 25.7458 62.5096 27.3763C62.5803 29.352 62.5588 31.3338 62.6295 33.3095C62.6909 35.0416 62.863 36.7707 62.9122 38.506C62.9798 40.8022 63.0321 43.1015 62.9768 45.3977C62.9552 46.2977 62.608 47.17 61.9503 47.8881C61.5507 48.3258 61.2649 48.8682 60.724 49.6665H60.7209ZM57.3156 11.2473C57.2142 11.2103 57.1128 11.1734 57.0083 11.1333C56.5196 11.6511 55.9757 12.1257 55.5546 12.6959C54.5896 13.9997 53.7044 15.3651 52.7456 16.675C52.0909 17.5688 51.8696 18.4103 52.5151 19.4397C53.4401 20.9099 54.2515 22.4387 55.4808 23.7054C56.2215 24.4667 56.8239 25.3636 57.7213 26.4917C57.6015 23.6808 57.4632 21.2243 57.3986 18.7678C57.331 16.262 57.3371 13.7531 57.3095 11.2473H57.3156ZM45.1236 19.825C44.5274 18.8325 43.9342 17.9017 43.3995 16.9432C42.8678 15.9908 42.2869 15.0939 41.3157 14.2494C41.199 18.0774 41.4971 21.665 41.8751 25.5794C43.0553 23.4897 44.0633 21.702 45.1236 19.825Z" fill="#9AACB8" fillOpacity="0.3" />
        </svg>
      </div>
    </Wrapper>
  )
}

const Wrapper = styled.section`
  margin-top: 10px;
  position: relative;

  @media (max-width: 1024px) {
    padding-bottom: 60px;
  }
  @media (max-width: 640px) {
    padding-bottom: 0;
  }

  .runes{
    position: absolute;
    bottom: -100px;
    left: 50%;
    transform: translateX(-50%);

    @media (max-width: 1024px) {
      bottom: -70px;
    }
    @media (max-width: 768px) {
      bottom: -50px;
    }
    @media (max-width: 640px) {
      display: none;
    }
  }

  @media (max-width: 768px) {
    margin-top: 50px;
  }
  @media (max-width: 480px) {
    margin-top: 80px;
  }

  .flex{
    margin-top: 15px;
    display: flex;
    gap: 75px;

    @media (max-width: 480px){
      gap: 24px;
      flex-wrap: wrap;
    }

    a{
      font-weight: 500;
      font-size: clamp(20rem, ${36 / 768 * 100}vw, 36rem);
      line-height: 149%;
      letter-spacing: 0.02em;
      text-decoration-line: underline;
      color: #CCC4C4;

      @media (max-width: 360px) {
        font-size: clamp(0rem, ${20 / 360 * 100}vw, 20rem);
      }
    }

    .line{
      display: block;
      width: 3px;
      background-color: #EEEBEB;
      margin: 5px 0;

      &:last-child{
        display: none;
      }

      @media (max-width: 640px) {
        display: none;
      }
    }
  }
`